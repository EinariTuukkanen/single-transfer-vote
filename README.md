# Single Transfer Vote
Script to calculate STV from CSV exported from Google Sheets generated by Google Forms. An example Google Forms is provided [here](https://forms.gle/yf9KB2R91aQv6XeaA).

## Usage

```
python stv.py <votes.csv>
```

The code stops and waits for user input in case of ties.

## Preparations

Check that your `votes.csv` has the following structure

```
Timestamp,A,B,C,D,E,F
<timestamp>,1,2,3,,,
<timestamp>,1,2,3,,,
<timestamp>,1,2,3,,,
<timestamp>,1,2,3,,,
<timestamp>,1,2,3,,,
<timestamp>,1,2,3,,,
<timestamp>,,,,1,2,3
<timestamp>,,,,1,2,3
```

where A,B,C,D,E,F etc. are the names of the candidates. Each row represents a single voting ballot. Numbers indicate the preferred order, i.e. voting `A, B, C` in the above example is represented by a row with `1,2,3,,,`. A ballow with names `D,E,F` corresponds to a row with `,,,1,2,3`.

Tip: the format is obtained using Google Form's 'Export to Google Sheets' feature when using a matrix-like question where the user selects preferred order for the candidates by selecting a vote number or index for each one (i.e. gives the "first vote" to a candidate X, then 2-vote to candidate Y etc.).

**IMPORTANT!** remember to update the `N_SEATS` in the code to correspond to the number of available seats.

**NOTE:** check that the quota used in the code is what you expect it to be and edit if necessary.

## TODO

- Move `N_SEATS` to command line argument
- Work around `TIE_ERROR` by using a fraction class for precise summing of floats
- Implement the code in a simple web application
